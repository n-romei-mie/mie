document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".project__row-list-wrapper");if(!e||!window.gsap||!window.Flip)return;let t=document.querySelector(".magnetic__row"),i=(e=4)=>{if(!(t.children.length>0))for(let i=0;i<e;i++){let r=document.createElement("div");r.className="magnetic__column",t.appendChild(r)}};t?(t.parentElement!==e?e.insertBefore(t,e.firstChild):t!==e.firstChild&&e.insertBefore(t,e.firstChild),i(4)):((t=document.createElement("div")).className="magnetic__row",e.insertBefore(t,e.firstChild),i(4));let r=()=>Array.from(document.querySelectorAll(".projects__row-item")),l=null,s=null,o=!1;gsap.set(t,{autoAlpha:0,x:0,y:0});let a=(i,r=!0)=>{if(!i)return;let s=i.getBoundingClientRect(),a=e.getBoundingClientRect(),n=s.left-a.left+e.scrollLeft,d=s.top-a.top+e.scrollTop,c=s.width,u=s.height;o||(Flip.fit(t,i,{scale:!1}),gsap.set(t,{autoAlpha:1}),o=!0),r?gsap.to(t,{duration:.45,ease:"expo.out",x:n,y:d,width:c,height:u,overwrite:"auto"}):gsap.set(t,{x:n,y:d,width:c,height:u}),l=i},n=e=>{s&&s!==e&&s.classList.remove("is-active"),e.classList.add("is-active"),s=e},d=()=>{s&&(s.classList.remove("is-active"),s=null)},c=e=>{let t=e.querySelector(".projects__row");if(!t)return;let i=()=>{n(e),a(t,!0)},r=()=>{s===e&&(s.classList.remove("is-active"),s=null)};e.addEventListener("mouseenter",i,{passive:!0}),e.addEventListener("focusin",i),e.addEventListener("mouseleave",r,{passive:!0}),e.addEventListener("focusout",r)};r().forEach(e=>{e.__magBound||(e.__magBound=!0,c(e))}),e.addEventListener("mouseleave",()=>{o=!1,l=null,d(),gsap.to(t,{autoAlpha:0,duration:.2,ease:"power2.out",overwrite:"auto"})});let u=()=>l&&a(l,!1);window.addEventListener("resize",u),e.addEventListener("scroll",u,{passive:!0});let v=new MutationObserver(()=>{r().forEach(e=>{e.__magBound||(e.__magBound=!0,c(e))}),u()});v.observe(e,{childList:!0,subtree:!0})});
